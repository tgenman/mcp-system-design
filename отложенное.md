

---

## Ключевые принципы MCP

### 1. Self-discovery через tools/list
- AI-агент не должен заранее знать о возможностях сервера
- Запрос `tools/list` возвращает машиночитаемый список доступных инструментов
- Включает описания, входные и выходные параметры

### 2. Stateful sessions
- Сохранение контекста между вызовами
- Снижение накладных расходов — нет необходимости повторно отправлять состояние
- Поддержка длительных диалогов

---

## Ключевые принципы MCP (продолжение)

### 3. Единый JSON-RPC 2.0 протокол
- Стандартизированный формат сообщений
- Совместимость между различными реализациями
- Простота интеграции для разработчиков

### 4. Двунаправленная связь
- сервер может отправлять уведомления
- Progress notifications: отчеты о ходе выполнения долгих операций  

---


<!-- header: 6. Преимущества MCP -->

# 6. Преимущества MCP

---

## Решение проблемы MxN: M + N вместо M × N
![](attachments/M+N.png)


<!-- _footer: https://huggingface.co/learn/mcp-course/unit1/key-concepts -->

---

## Динамическое обнаружение инструментов. Runtime discovery

```json
// Запрос списка доступных инструментов
{
  "jsonrpc": "2.0",
  "method": "tools/list",
  "id": 1
}

// Ответ с описанием инструментов
{
  "jsonrpc": "2.0",
  "result": {
    "tools": [
      {
        "name": "create_report",
        "description": "Создает отчет по клиенту",
        "inputSchema": { ... }
      }
    ]
  },
  "id": 1
}
```
---

## Контекстность и stateful-сессии

Классические API (stateless):
```http
GET /api/tasks?user_id=123&status=active&filter=urgent
GET /api/tasks?user_id=123&status=active&filter=urgent&page=2
POST /api/tasks { "user_id": 123, "title": "New task", ... }
```

MCP (stateful):
```json
// Контекст сохраняется между вызовами
1. "Покажи мои срочные задачи"
2. "Отметь первую как выполненную" // знает о предыдущем списке
```

---

## Крупнозернистые операции: "one tool, one human task"

Классические API: множество мелких вызовов
```
1. GET /user/123
2. GET /user/123/orders  
3. GET /orders/456/items
4. POST /reports { user_data, order_data, items_data }
5. PUT /reports/789 { status: "completed" }
```

MCP: высокоуровневые инструменты
```json
{
  "name": "generate_customer_report",
  "description": "Создает полный отчет по клиенту с историей заказов",
  "parameters": {
    "customer_id": 123,
    "period": "last_month"
  }
}
```

---

## Гибкость развертывания: локальное и удаленное выполнение

### Локальное выполнение (STDIO)
```bash
# Запуск MCP-сервера как локального процесса
./mcp-server --stdio
```
Преимущества:
- Высокая производительность (нет сетевых задержек)
- Максимальная безопасность
- Простота отладки

---

### Удаленное выполнение (HTTP + SSE)
```http
POST /mcp/tools/call
Content-Type: application/json

{ "tool": "create_report", "params": {...} }
```
Преимущества:
- Масштабируемость
- Централизованное управление
- Возможность распределенной архитектуры

---
