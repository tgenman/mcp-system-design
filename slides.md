---
marp: true
theme: default
paginate: true
title: "От REST к MCP: как LLM меняют принципы проектирования API и архитектуры систем"
backgroundColor: white
lang: ru
---

<!-- _paginate: skip -->

# От REST к MCP: 
# как LLM меняют принципы проектирования API и архитектуры систем 
## Дмитрий Бондарев

---

# Agenda

- Введение: что такое API и его история
- Современное состояние API (REST, GraphQL, gRPC)
- Появление LLM-агентов и новые вызовы
- Проблемы классических API в контексте LLM
- Знакомство с MCP как решением
- Изменения в архитектурных принципах
- Новая архитектура системы
- Безопасность и новые риски
- Практические примеры и заключение

---

# Введение

---

<!-- header: Введение -->

## Что такое API?

**API (application programming interface)** — это формально описанный способ, по которому одна программа обращается к другой: какие операции доступны, какие параметры и форматы данных нужны, какие ошибки возможны и что гарантирует система.

Иными словами, это **контракт** между «поставщиком» функций/данных и их «потребителем», независимый от внутренней реализации.

---

## Краткая историческая справка об API

- **≈80 лет назад (≈1945–1951):** 
    - Появились первые библиотеки подпрограмм и модульный подход.

- **≈57 лет назад (1968):** 
    - В инженерных текстах закрепился термин **API** (*application program interface*)

- **≈25 лет назад (≈2000):** 
    - Началась эпоха **веб-API**: компании стали открывать HTTP-интерфейсы для внешних разработчиков.


---

# Текущие способы формирования синхронного API
- REST (stateless)
    - overfetching/underfetching
- GraphQL
    - сложность кеширования и реализации вложенных запросов (N+1 problem)
- gRPC
    - жесткие контракты



---

# Таблица сравнения REST, gRPC, 

TBD


---

# во всех трех случаях клиент (программа) должен заранее знать API
ссылка на принцип из REST хетаос как то там


---

<!-- header: Что меняется с приходом LLM и как надо пересматривать принципы проектирония -->

# Что меняется с приходом LLM и как надо пересматривать принципы проектирония

---

Историческая справка с датой выхода GPT-3.5
2025 год - год Агентов

---


## Что такое Агент и отличие его от workflow

Неопределенность вычислительного DAG. Решение об используемых сервисах происходит в процессе выполнения.

Иначе это workflow и проблемы нет. Прибить гвоздями и жестко определить вызовы (но опять же может не быть знания какие методы использовать)
Но с другой стороны определен жестко LLM

### Какие же проблемы возникают при переходе на искользование LLM как consumer?

---

## Проблема MxN

![](attachments/MxN.png)

<!-- _footer: https://huggingface.co/learn/mcp-course/unit1/key-concepts -->

---

## Проблема что клиент не знает АПИ

// TODO перенести в раздел с MCP
- selfdiscovery
- стандартизированные точки входа

---

## Из вышеприведенного проблема с неопределенностью вычислительного DAG у Агентов 
Нельзя построить предсказуемый workflow

---

## Проблема что данные поступают постепенно

Решение через streamed протоколы


---


// TODO переписать
# Описание MCP спецификации и отличие его от REST и RPC
- Протокол MCP основан на JSON-RPC 2.0 и следует архитектуре Client-Host-Server
- MCP позиционируется как универсальный адаптер, подобно USB-C для AI-приложений, который обеспечивает стандартизированный способ подключения AI-моделей к различным источникам данных и инструментам.
- ключевые принципы
    - selfdiscovery -  AI-агент не должен заранее "знать" о возможностях сервера. Вместо этого, он может отправить запрос tools/list и получить машиночитаемый список доступных инструментов, их описания, входные и выходные параметры.
        - указать где то что такое агент
    - stateful - Передача контекста снижает накладные расходы, поскольку нет необходимости повторно отправлять информацию о состоянии в каждом запросе.
    - единый интерфейс
- добавить про поддержку авторизации

---

# Плюсы MCP

---

## M x N превращается в M + N
![](attachments/M+N.png)


<!-- _footer: https://huggingface.co/learn/mcp-course/unit1/key-concepts -->

---

# Проблемы которые MCP создает
## Метрики работы MCP

// TODO переписать
# Изменения в Системном дизайне
	- stateful-сессии усложняют Load Balancing и требуют реализации sticky-sessions

---


// TODO переписать
# Тестирование АПИ
	- Сложность тестирования мср. Нужна специальная программа (не постман)
	- Идея А/В теста методов MCP (как они захотят LLM-based агенты)

---

// TODO переписать
# Будущее API-дизайна

---

# Примеры кода на Go и Python

---
